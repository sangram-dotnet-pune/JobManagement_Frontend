<div *ngIf="jobId && jobTitle; else noJob">
  <!-- Title -->
  <h2 class="applications-title">{{ jobTitle }} â€“ Applications</h2>

  <!-- Search -->
  <div class="search-wrapper">
    <input
      type="text"
      class="search-input"
      placeholder="Search by name or email..."
      [(ngModel)]="searchTerm"
    />
  </div>

  <!-- Applications List -->
  <div
    class="app-card"
    *ngFor="let app of Jobapplications() | applicantFilter: searchTerm"
    (click)="openFlyoutById(app.id)"
  >
    <div class="card-header">
      <h4>{{ app.applicantName }}</h4>

      <span class="status" [class]="app.status.toLowerCase()">
        {{ app.status }}
      </span>
    </div>
  </div>
</div>

<!-- No Job Selected -->
<ng-template #noJob>
  <p class="empty-text">Select a job to view applications</p>
</ng-template>

<!-- Backdrop -->
<div class="flyout-backdrop" *ngIf="isFlyoutOpen()" (click)="closeFlyout()"></div>

<!-- Flyout -->
<div class="flyout" *ngIf="isFlyoutOpen()">
  <button class="close-btn" (click)="closeFlyout()">âœ•</button>

  <ng-container *ngIf="selectedApplication() as app">
    <div class="modal-header">
      <h3>{{ app.applicantName }}</h3>
      <span class="badge" [class]="app.status.toLowerCase()">
        {{ app.status }}
      </span>
    </div>

    <section class="card">
      <h4>Personal Info</h4>
      <p><b>Email:</b> {{ app.applicantEmail }}</p>
      <p><b>Phone:</b> {{ app.phone }}</p>
      <p><b>Address:</b> {{ app.address }}</p>
    </section>

    <section class="card">
      <h4>Education</h4>
      <p><b>Qualification:</b> {{ app.qualification }}</p>
      <p><b>Graduation Year:</b> {{ app.graduationYear }}</p>
    </section>

    <section class="card">
      <h4>Application</h4>
      <p><b>Applied At:</b> {{ app.appliedAt | date: 'medium' }}</p>

      <a *ngIf="app.resumeUrl" [href]="app.resumeUrl" target="_blank" class="resume-link">
        ðŸ“Ž View Resume
      </a>

      <p *ngIf="app.coverLetter" class="cover-letter">
        {{ app.coverLetter }}
      </p>
    </section>

    <div class="actions">
  <button
    class="reject"
    (click)="updateStatus(app.id, 'REJECTED')">
    Reject
  </button>

  <button
    class="approve"
    (click)="updateStatus(app.id, 'APPROVED')">
    Approve
  </button>
</div>

  </ng-container>
</div>
